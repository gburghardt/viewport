/*! browser-viewport 2014-05-16 */
;function Viewport(a){if(!a){throw new Error("Missing required argument: window")}var m=this,d={"resize:complete":{type:"resize",handle:null,useCapture:false,bound:false,listeners:[],element:a},"scroll:complete":{type:"scroll",handle:null,useCapture:false,bound:false,listeners:[],element:a.document}},l=20,b=a.orientation||this.height>this.width?0:90;_orientationEvent={mql:a.matchMedia?a.matchMedia("(orientation: portrait)"):null,regex:/^orientation:\w+$/i,listeners:{count:0,"orientation:change":[],"orientation:portrait":[],"orientation:landscape":[]},test:function(n){return this.regex.test(n)&&!!this.listeners[n]}},_resizeTimer=null,_resizeTimeout=300,_scrollTimer=null,_scrollTimeout=300,createAccessor=function(o,n,p){Object.defineProperty(m,o,{enumerable:true,get:n,set:p})},createGetter=function(o,n){Object.defineProperty(m,o,{enumerable:true,get:n})};createGetter("bottom",function(){return a.pageYOffset+a.innerHeight});createGetter("document",function(){return a.document});createAccessor("eventListenerDelay",function(){return l},function(n){l=n});createGetter("height",function(){return a.innerHeight});createGetter("left",function(){return a.pageXOffset});createGetter("location",function(){return a.location});createGetter("orientation",function(){return b});createAccessor("resizeTimeout",function(){return _resizeTimeout},function(n){_resizeTimeout=n});createGetter("right",function(){return a.pageXOffset+a.innerWidth});createGetter("screen",function(){return a.screen});createAccessor("scrollTimeout",function(){return _scrollTimeout},function(n){_scrollTimeout=n});createGetter("top",function(){return a.pageYOffset});createGetter("width",function(){return a.innerWidth});createGetter("window",function(){return a});this.destructor=function(){if(_resizeTimer){a.clearTimeout(_resizeTimer);_resizeTimer=null}if(_scrollTimer){a.clearTimeout(_scrollTimer);_scrollTimer=null}f(d["resize:complete"]);f(d["scroll:complete"]);m=d=a=null};this.addEventListener=function(o,q){o=o.toLowerCase();var p,n;if(_orientationEvent.test(o)){n=_orientationEvent.listeners;if(!n.count&&_orientationEvent.mql){_orientationEvent.mql.addListener(j)}n[o].push(q);n.count++}else{if(p=d[o]){c(p);p.listeners.push(q)}}};this.removeEventListener=function(p,r){p=p.toLowerCase();var q,n,o;if(_orientationEvent.test(p)){o=_orientationEvent.listeners[p];n=o.indexOf(r);if(n>-1){o.splice(n,1);if(--o.count===0&&_orientationEvent.mql){_orientationEvent.mql.removeListener(j)}}}else{if(d[p]){q=d[p];n=q.listeners.indexOf(r);if(n>-1){q.listeners.splice(n,1);if(!q.listeners.length){f(q)}}}}};var c=function(n){if(n.bound){return}n.element.addEventListener(n.type,n.handle,n.useCapture);n.bound=true},g=function(){k(d["resize:complete"].listeners)},e=function(){k(d["scroll:complete"].listeners)},k=function(o){if(!o.length){return}var p=function(){if(++n===o.length||o[n](m)===false){return}a.setTimeout(p,l)},n=-1;p()},j=function(n){b=n.matches?0:a.orientation||90;k(_orientationEvent.listeners["orientation:change"]);if(n.matches){k(_orientationEvent.listeners["orientation:portrait"])}else{k(_orientationEvent.listeners["orientation:landscape"])}},h=function(n){if(_resizeTimer){a.clearTimeout(_resizeTimer);_resizeTimer=null}_resizeTimer=a.setTimeout(g,_resizeTimeout)},i=function(n){if(_scrollTimer){a.clearTimeout(_scrollTimer);_scrollTimer=null}_scrollTimer=a.setTimeout(e,_scrollTimeout)},f=function(n){if(!n.bound){return}n.element.removeEventListener(n.type,n.handle,n.useCapture);n.bound=false};d["resize:complete"].handle=h;d["scroll:complete"].handle=i}Viewport.prototype={constructor:Viewport,contains:function(a){var c=this.getElementPosition(a),b=this.getPosition();if(c.left<b.right&&c.right>b.left&&c.top<b.bottom&&c.bottom>b.top){return true}else{return false}},getElementPosition:function(a){var b={left:a.offsetLeft,top:a.offsetTop,width:a.offsetWidth,height:a.offsetHeight};while(a=a.offsetParent){b.left+=a.offsetLeft;b.top+=a.offsetTop}b.right=b.left+b.width;b.bottom=b.top+b.height;return b},getPosition:function(){return{left:this.left,top:this.top,width:this.width,height:this.height,right:this.right,bottom:this.bottom}},is:function(a){return this===a||this.window===a||this.screen===a||this.document===a},matchMedia:function(a){return this.window.matchMedia?this.window.matchMedia(a):{matches:false}},querySelector:function(a,d,c){var b=null;this.querySelectorAll(a,function(e){b=e;return false});return b},querySelectorAll:function(b,h,e){h=h||function(){};e=e||this;var g=this.document.body.querySelectorAll(b),d=0,a,f=[],c;for(d;d<g.length;d++){c=g[d];if(this.contains(c)){f.push(c);if(a!==false){a=h.call(e,c,d,this)}}}return f},toString:function(){return"[object Viewport: "+this.location+"]"}};